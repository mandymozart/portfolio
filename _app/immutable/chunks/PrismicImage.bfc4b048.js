import{s as x,e as T,i as W,n as j,d as V,V as L,T as k,X as H,f as q,g as F,U as C,M as K}from"./scheduler.754fba1b.js";import{g as M}from"./spread.84d39b6c.js";import{S as O,i as R}from"./index.4c6eb505.js";import"./index.5d05cbe9.js";const v=t=>t!=null,f=t=>v(t)&&!!t.url,te=t=>v(t)&&("id"in t||"url"in t),se=t=>v(t)&&!!t.embed_url,X=t=>t.replace(/[A-Z]/g,i=>`-${i.toLowerCase()}`),b=(t,i)=>{const e=new URL(t);for(const r in i){const l=X(r),c=i[r];c===void 0?e.searchParams.delete(l):Array.isArray(c)?e.searchParams.set(l,c.join(",")):e.searchParams.set(l,`${c}`)}const s=e.searchParams.get("s");return s&&(e.searchParams.delete("s"),e.searchParams.append("s",s)),e.toString()},G=(t,{pixelDensities:i,...e})=>i.map(s=>`${b(t,{...e,dpr:s})} ${s}x`).join(", "),I=(t,{widths:i,...e})=>i.map(s=>`${b(t,{...e,w:void 0,width:s})} ${s}w`).join(", "),E=[640,828,1200,2048,3840],Z=(t,i={})=>{if(t&&f(t)){let{widths:e=E,...s}=i;const{url:r,dimensions:l,id:c,alt:a,copyright:m,edit:g,...d}=t,h=Object.values(d);return e==="thumbnails"&&h.length<1&&(e=E),{src:b(r,s),srcset:e==="thumbnails"?[I(r,{...s,widths:[l.width]}),...h.map(u=>I(u.url,{...s,widths:[u.dimensions.width]}))].join(", "):I(t.url,{...s,widths:e})}}else return null},z=[1,2,3],B=(t,i={})=>{if(t&&f(t)){const{pixelDensities:e=z,...s}=i;return{src:b(t.url,s),srcset:G(t.url,{...s,pixelDensities:e})}}else return null};function U(t){let i,e,s,r,l=[{src:e=t[3]},{srcset:s=t[4]},{alt:r=t[1]??(t[0].alt||t[2])},{width:t[5]},{height:t[6]},t[7]],c={};for(let a=0;a<l.length;a+=1)c=k(c,l[a]);return{c(){i=q("img"),this.h()},l(a){i=F(a,"IMG",{src:!0,srcset:!0,alt:!0,width:!0,height:!0}),this.h()},h(){C(i,c)},m(a,m){W(a,i,m)},p(a,m){C(i,c=M(l,[m&8&&!K(i.src,e=a[3])&&{src:e},m&16&&s!==(s=a[4])&&{srcset:s},m&7&&r!==(r=a[1]??(a[0].alt||a[2]))&&{alt:r},m&32&&{width:a[5]},m&64&&{height:a[6]},m&128&&a[7]]))},d(a){a&&V(i)}}}function J(t){let i=f(t[0]),e,s=i&&U(t);return{c(){s&&s.c(),e=T()},l(r){s&&s.l(r),e=T()},m(r,l){s&&s.m(r,l),W(r,e,l)},p(r,[l]){l&1&&(i=f(r[0])),i?s?s.p(r,l):(s=U(r),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:j,o:j,d(r){r&&V(e),s&&s.d(r)}}}function Q(t,i,e){const s=["field","imgixParams","alt","fallbackAlt","width","height","widths","pixelDensities"];let r=L(i,s),{field:l}=i,{imgixParams:c={}}=i,{alt:a=void 0}=i,{fallbackAlt:m=void 0}=i,{width:g=void 0}=i,{height:d=void 0}=i,{widths:h=void 0}=i,{pixelDensities:u=void 0}=i,S,D,w,A;return t.$$set=n=>{i=k(k({},i),H(n)),e(7,r=L(i,s)),"field"in n&&e(0,l=n.field),"imgixParams"in n&&e(8,c=n.imgixParams),"alt"in n&&e(1,a=n.alt),"fallbackAlt"in n&&e(2,m=n.fallbackAlt),"width"in n&&e(9,g=n.width),"height"in n&&e(10,d=n.height),"widths"in n&&e(11,h=n.widths),"pixelDensities"in n&&e(12,u=n.pixelDensities)},t.$$.update=()=>{if(t.$$.dirty&7937&&f(l)){const n=o=>{if(typeof o=="number"||typeof o>"u"||o===null)return o;{const y=Number.parseInt(o);return Number.isNaN(y)?void 0:y}},N=l.dimensions.width/l.dimensions.height,_=n(g),P=n(d);if(e(5,w=_??l.dimensions.width),e(6,A=P??l.dimensions.height),_!=null&&P==null?e(6,A=_/N):_==null&&P!=null&&e(5,w=P*N),h||!u){const o=Z(l,{...c,widths:h==="defaults"?void 0:h});e(3,S=o.src),e(4,D=o.srcset)}else if(u){const o=B(l,{...c,pixelDensities:u==="defaults"?void 0:u});e(3,S=o.src),e(4,D=o.srcset)}}},[l,a,m,S,D,w,A,r,c,g,d,h,u]}class ie extends O{constructor(i){super(),R(this,i,Q,J,x,{field:0,imgixParams:8,alt:1,fallbackAlt:2,width:9,height:10,widths:11,pixelDensities:12})}}export{ie as P,se as e,te as l};
